---
title: "Project Report: Cars Crash"
author: "Huy Ngo"
date: "Fall 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(digits = 3)
```

```{r load-sas-libraries, echo = F, message = F, warning = F}

library(SASmarkdown)
sas_enginesetup(sashtml=sashtml)

sasexe <- "C:/Program Files/SASHome/SASFoundation/9.4/sas.exe"
sasopts <- "-nosplash -ls 75"

# Linux options (for grading, please leave this in!)
# sasexe <- "/usr/local/SASHome/SASFoundation/9.4/bin/sas_en"
# sasopts <- "-ls 75"
```

```{r, echo=FALSE, message=FALSE, warning=FALSE} 
library(dplyr)
library(readr)
Crash <- read_csv("monroe-county-crash-data2003-to-2015.csv")
```

## Introduction

* Motorized vehicles have made rapid economic, social, and cultural progress in the country. Although they are an indispensable part of modern life, they also carry risks that affect human life. Every day, with hundreds of millions of car trips moving continuously, it means that the number of accidents is not small. The cause of the accident is uncountable. Meanwhile, the development of cell phones has made it harder to concentrate on driving.

* The data use in this project is accidents recorded in Monroe County, Indiana, from 2003 to 2015. There are more than 53.000 observations (accidents reported) and many variables.But I am interested in some certain variables, like:
  - Day/ Month/ Year/ Hour (that accidents occurred). 
  - How many cars involved? (Collision type). 
  - What kind of injuries? 
  - What is the primary reason that causes accidents to happen?  

```{r, engine="sashtml", engine.path=sasexe, engine.opts=sasopts, collectcode = T, error = T, echo=FALSE, message=FALSE, warning=FALSE}
ODS HTML STYLE=HTMLBLUE;
filename dat "monroe-county-crash-data2003-to-2015.csv";
PROC IMPORT DATAFILE = dat OUT = Crash
    DBMS = CSV 
    REPLACE; 
    GETNAMES = YES;
    GUESSINGROWS = 5000;
RUN;
proc print data= Crash (obs=5);
var Year Month Day Hour Collision_Type Injury_Type Primary_Factor;
title 'Table.1. Monroe County Accidents Reported from 2003 to 2015 (10 observations)';
run;
```


* Some questions I want to find out through the data include:
  - Which year has the highest rate of accident? On what month? Is that month consistent for all other years? 
  - Is there any specific day (or month, year) with more accidents than the other day (month/ year)? 
  - On that day (month/ year), what is the primary factor that causes the accident? What are the highest injuries? 
  

## Methods

*



## Analysis

- The accidents recorded through year by create a frequency table. Then, create a bar graph so we can visualize it.

```{r, engine="sashtml", engine.path=sasexe, engine.opts=sasopts, collectcode = T, error = T, echo=FALSE, message=FALSE, warning=FALSE}
ODS HTML STYLE=HTMLBLUE;
title 'Table.2. Accidents frequency through years';
PROC FREQ DATA=Crash;
    TABLE Year;
output out = YE;
RUN;
Proc print data = YE;
run;
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
ggplot(Crash, aes(x = Year)) + 
  geom_bar(fill="steelblue")+
  geom_text(aes(Year, 6000, label=Year))+
  theme_minimal()
```

- From the table and the chart above, we see that 2003 has the highest accidents reported. Now, we will look at the number of accidents by months, follow the year of 2003 only: 


```{r, engine="sashtml", engine.path=sasexe, engine.opts=sasopts, collectcode = T, error = T, echo=FALSE, message=FALSE, warning=FALSE}
ODS HTML STYLE=HTMLBLUE;
filename dat "monroe-county-crash-data2003-to-2015.csv";
PROC IMPORT DATAFILE = dat OUT = Crash
    DBMS = CSV 
    REPLACE; 
    GETNAMES = YES;
    GUESSINGROWS = 5000;
RUN;

```